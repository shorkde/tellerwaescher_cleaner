// Generated by CoffeeScript 1.3.1
(function() {

  $(function() {
    var MyBackboneModel;
    MyBackboneModel = Backbone.Model.extend({
      sync: function(method, model, options) {
        var params;
        console.log("####");
        if (typeof this.type === "undefined") {
          this.type = "POST";
        }
        if (typeof this.url === "function") {
          options.url = this.url();
        } else {
          options.url = this.url;
        }
        if (!this.noJsonStringify) {
          options.data = {
            request: JSON.stringify(this.query)
          };
        } else {
          options.data = this.query;
        }
        params = {
          type: this.type,
          dataType: 'json'
        };
        return $.ajax(_.extend(params, options));
      }
    });
    window.RecipeModel = Backbone.Model.extend({
      initialize: function() {
        return console.log("recipe model init");
      },
      parse: function(response) {
        if (typeof response.pictures[0] !== "undefined") {
          response.picture = response.pictures[0]["iphone"]["120x120"];
        } else {
          response.picture = "images/default.png";
        }
        return response;
      }
    });
    return window.RecipeDetailModel = Backbone.Model.extend({
      url: function() {
        return "/api/ios/get_recipe/" + this.id + "/";
      },
      parse: function(res) {
        if (typeof res.pictures[0] !== "undefined") {
          res.picture = res.pictures[0]["iphone"]["120x120"];
        } else {
          res.picture = "images/default.png";
        }
        res.parts = Utility.format_steps(res.parts);
        return res;
      }
    });
  });

}).call(this);
